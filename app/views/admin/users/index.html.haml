!!!
%html{lang: "en"}
  %head
    %meta{charset: "UTF-8"}
    %meta{name: "viewport", content: "width=device-width, initial-scale=1"}
    %title SVXReflector Â· Admin Users
    %script{src: "https://cdn.tailwindcss.com"}
    :javascript
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              ghbg: '#0d1117',
              ghcard: '#161b22',
              ghborder: '#30363d',
              ghborder2: '#21262d',
              ghtext: '#c9d1d9',
              ghmuted: '#8b949e',
              ghdim: '#6e7681',
            }
          }
        }
      }
    %link{rel: "stylesheet", href: "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"}
    :css
      body { background: #0d1117; }
      .admin-table th { font-size: .73rem; text-transform: uppercase; letter-spacing: .05em; color: #6e7681; border-color: #21262d; }
      .admin-table td { font-size: .85rem; border-color: #21262d; vertical-align: middle; }

  %body.text-ghtext
    = render 'shared/navbar', active: 'admin'

    .max-w-5xl.mx-auto.px-4
      .flex.justify-between.items-center.mb-4
        %h5.text-lg.font-semibold.text-gray-100
          %i.bi.bi-people.mr-2
          Users
        = link_to new_admin_user_path, class: "inline-block text-sm px-3 py-1.5 rounded-md bg-blue-600 hover:bg-blue-700 text-white font-semibold" do
          %i.bi.bi-plus-lg.mr-1
          New User

      - if flash[:notice]
        %div.p-2.rounded.border.border-green-700.text-green-400.text-sm.mb-4{class: "bg-green-900/30"}= flash[:notice]
      - if flash[:alert]
        %div.p-2.rounded.border.border-red-700.text-red-400.text-sm.mb-4{class: "bg-red-900/30"}= flash[:alert]

      .overflow-x-auto
        %table.w-full.text-left.admin-table
          %thead
            %tr.border-b.border-ghborder2
              %th.py-2.px-3 Callsign
              %th.py-2 Name
              %th.py-2 Email
              %th.py-2 Mobile
              %th.py-2 Telegram
              %th.py-2 Role
              %th.py-2 Status
              %th.py-2.text-right.pr-3 Actions
          %tbody
            - @users.each do |user|
              %tr.border-b.border-ghborder2.hover:bg-ghcard
                %td.py-2.px-3.font-mono.font-bold= user.callsign
                %td.py-2= user.name
                %td.py-2
                  - if user.email.present?
                    %a.text-cyan-400.hover:underline{href: "mailto:#{user.email}"}= user.email
                %td.py-2= user.mobile
                %td.py-2
                  - if user.telegram.present?
                    %span.text-cyan-400= user.telegram
                %td.py-2
                  - if user.admin?
                    %span.inline-block.px-2.py-0.5.text-xs.rounded-full.bg-yellow-600.text-yellow-100 admin
                  - else
                    %span.inline-block.px-2.py-0.5.text-xs.rounded-full.bg-gray-600.text-gray-200 user
                %td.py-2
                  - if user.approved?
                    %span.inline-block.px-2.py-0.5.text-xs.rounded-full.bg-green-700.text-green-100 approved
                  - else
                    %span.inline-block.px-2.py-0.5.text-xs.rounded-full.bg-orange-600.text-orange-100 pending
                %td.py-2.text-right.pr-3
                  .inline-flex.gap-1.justify-end
                    - unless user.approved?
                      = button_to approve_admin_user_path(user), method: :patch, class: "inline-block text-sm px-2 py-1 rounded border border-green-700 text-green-400 hover:text-green-300", form_class: "inline" do
                        %i.bi.bi-check-lg
                    = link_to edit_admin_user_path(user), class: "inline-block text-sm px-2 py-1 rounded border border-gray-600 text-gray-400 hover:text-gray-200" do
                      %i.bi.bi-pencil
                    - unless user == current_user
                      = button_to admin_user_path(user), method: :delete, class: "inline-block text-sm px-2 py-1 rounded border border-red-700 text-red-400 hover:text-red-300", form_class: "inline", form: { data: { turbo_confirm: "Delete #{user.callsign}?" } } do
                        %i.bi.bi-trash
