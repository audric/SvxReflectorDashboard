!!!
%html{lang: "en"}
  %head
    %meta{charset: "UTF-8"}
    %meta{name: "viewport", content: "width=device-width, initial-scale=1"}
    %title SVXReflector · Settings
    %script{src: "https://cdn.tailwindcss.com"}
    :javascript
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              ghbg: '#0d1117',
              ghcard: '#161b22',
              ghborder: '#30363d',
              ghborder2: '#21262d',
              ghtext: '#c9d1d9',
              ghmuted: '#8b949e',
              ghdim: '#6e7681',
            }
          }
        }
      }
    %link{rel: "stylesheet", href: "https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"}
    :css
      body { background: #0d1117; }

  %body.text-ghtext
    = render 'shared/navbar', active: 'admin'

    .max-w-xl.mx-auto.px-4
      - if flash[:notice]
        %div.p-2.rounded.border.border-green-700.text-green-400.text-sm.mb-4{class: "bg-green-900/30"}= flash[:notice]

      .rounded-lg.border.border-gray-600.bg-ghcard
        .px-4.py-3.border-b.border-gray-600
          %h5.text-lg.font-semibold.text-gray-100
            %i.bi.bi-gear.mr-2
            Settings
        .p-4
          = form_with url: admin_settings_path, method: :patch, local: true do |f|
            .mb-4
              %label.block.text-sm.text-gray-500.mb-1 Reflector Status URL
              %input.w-full.px-3.py-2.rounded-md.border.border-gray-600{class: "bg-[#0d1117]", type: "url", name: "settings[reflector_status_url]", value: @settings["reflector_status_url"], placeholder: "http://host:8080/status"}
              %small.text-gray-500 The SVXReflector HTTP status endpoint polled by the updater.

            .mb-4
              %label.block.text-sm.text-gray-500.mb-1 Brand Name
              %input.w-full.px-3.py-2.rounded-md.border.border-gray-600{class: "bg-[#0d1117]", type: "text", name: "settings[brand_name]", value: @settings["brand_name"], placeholder: "My Reflector"}
              %small.text-gray-500 Display name shown in the navbar.

            .mb-4
              %label.block.text-sm.text-gray-500.mb-1 Poll Interval (seconds)
              %input.w-full.px-3.py-2.rounded-md.border.border-gray-600{class: "bg-[#0d1117]", type: "number", name: "settings[poll_interval]", value: @settings["poll_interval"], min: 1, max: 10, step: 1}
              %small.text-gray-500 How often the updater polls the reflector (1–10 seconds).

            .flex.gap-2
              = f.submit "Save Settings", class: "px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white font-semibold cursor-pointer"
              = link_to "Back", admin_users_path, class: "px-4 py-2 rounded-md border border-gray-600 text-gray-400 hover:text-gray-200"
